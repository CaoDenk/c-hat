# 单元测试发现的问题

根据完善单元测试时发现的问题，整理如下：

## 问题列表

### 1. const 数组/元组元素修改检查未实现
**优先级：高**
**问题描述：**
当前语义分析器中，const 数组/元组的元素修改检查未实现。例如，`const int[3] arr = [1, 2, 3]; arr[0] = 99;` 应该报错，但目前没有检查。

**相关测试：**
- ArrayTest.cpp: 已注释的 "const array cannot modify elements" 测试

**修复方案：**
需要在 SemanticAnalyzer 的 analyzeBinaryExpr（处理赋值）和 isBaseObjectReadonly 函数中，添加对 ReadonlyType（const 类型）的检查，当尝试修改只读数组/元组元素时应该报错。

---

### 2. Lambda 表达式测试未完善
**优先级：中**
**问题描述：**
Lambda 表达式的解析和语义分析测试目前不完整，测试用例调试过程中发现 Lambda 表达式的解析还有问题。

**相关测试：**
- LambdaTest.cpp: 当前只添加了一个基本测试用例

**修复方案：**
1. 调试 Lambda 表达式的解析逻辑（parseLambdaOrArrayInit、parseLambdaExprWithCaptures）
2. 完善 Lambda 表达式的语义分析
3. 补充完整的 Lambda 表达式测试用例

---

### 3. 类系统深度测试未实现
**优先级：中**
**问题描述：**
类系统的测试目前只覆盖基础声明、构造函数和析构函数，但缺少继承、接口、成员访问控制、成员函数调用等深度测试。

**相关测试：**
- ClassTest.cpp: 当前只包含基础测试

**修复方案：**
1. 完善类系统的语义分析（继承、成员访问控制等）
2. 补充完整的类系统测试用例

---

## 修复顺序建议

1. **优先级高：** 实现 const 数组/元组元素修改检查
2. **优先级中：** 调试并完善 Lambda 表达式
3. **优先级中：** 完善类系统深度测试
