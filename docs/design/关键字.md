# C^ (C-Hat) 关键字文档

本文档列出了 C^ 语言的所有保留关键字。这些关键字具有特殊含义，不能用作标识符（如变量名、函数名、类名等）。

## 1. 核心关键字

| 关键字          | 说明                                      |
| :-------------- | :---------------------------------------- |
| **`func`**      | 函数声明关键字                            |
| **`class`**     | 类定义关键字                              |
| **`struct`**    | 结构体定义关键字                          |
| **`enum`**      | 枚举定义关键字                            |
| **`union`**     | 联合体定义关键字                          |
| **`interface`** | 接口定义关键字                            |
| **`self`**      | **当前实例引用**。                        |
| **`late`**      | 延迟初始化关键字，用于栈上预留空间        |
| **`new`**       | 堆内存分配                                |
| **`delete`**    | 堆内存释放                                |
| **`var`**       | 可变变量声明 (支持类型推导)               |
| **`let`**       | 不可变变量声明 (支持类型推导)，运行时常量 |
| **`const`**     | 编译期常量声明 (类似 constexpr)           |
| **`static`**    | 静态存储期声明                            |
| **`where`**     | 泛型约束子句                              |
| **`requires`**  | 泛型结构性约束 (Concept 风格)             |
| **`concept`**   | 约束命名 (编译期)                         |

## 2. 控制流关键字

| 关键字         | 说明                                           |
| :------------- | :--------------------------------------------- |
| **`if`**       | 条件语句                                       |
| **`else`**     | 条件语句分支                                   |
| **`match`**    | 模式匹配语句 (替代 switch)                     |
| **`case`**     | 模式匹配分支关键字 (用于显式分支)              |
| **`default`**  | 默认分支关键字 (可用于 match 或 context)       |
| **`for`**      | 循环语句                                       |
| **`while`**    | 循环语句                                       |
| **`do`**       | 循环语句                                       |
| **`break`**    | 跳出循环                                       |
| **`continue`** | 继续下一次循环                                 |
| **`return`**   | 返回语句                                       |
| **`goto`**     | 跳转语句                                       |
| **`try`**      | 异常处理块 / Result 传播操作符                 |
| **`catch`**    | 异常捕获块                                     |
| **`throw`**    | 抛出异常                                       |
| **`defer`**    | **延迟执行**。退出作用域时执行，用于资源清理。 |
| **`await`**    | 等待协程或 Awaitable 对象                      |
| **`import`**   | 导入模块                                       |
| **`module`**   | 模块声明                                       |
| **`internal`** | 包/项目内可见性修饰符                          |
| **`as`**       | 别名关键字 (用于 import 或类型转换)            |
| **`using`**    | 用于类型别名                                   |

## 3. 访问修饰符与存储类

| 关键字          | 说明                        |
| :-------------- | :-------------------------- |
| **`public`**    | 公开访问                    |
| **`private`**   | 私有访问                    |
| **`protected`** | 保护访问                    |
| **`static`**    | 静态成员                    |
| **`virtual`**   | 虚函数                      |
| **`abstract`**  | 抽象类/方法                 |
| **`final`**     | 密封类/方法，禁止继承或重写 |
| **`override`**  | 重写基类方法                |
| **`extern`**    | 外部链接                    |

## 4. 类型相关关键字

| 关键字         | 说明                                                                              |
| :------------- | :-------------------------------------------------------------------------------- |
| **`void`**     | 空类型                                                                            |
| **`sbyte`**    | 有符号8位整数                                                                     |
| **`byte`**     | 无符号8位整数 (原始数据)                                                          |
| **`short`**    | 16位整数                                                                          |
| **`ushort`**   | 无符号16位整数                                                                    |
| **`int`**      | 32位整数                                                                          |
| **`uint`**     | 无符号32位整数                                                                    |
| **`long`**     | 64位整数                                                                          |
| **`ulong`**    | 无符号64位整数                                                                    |
| **`float`**    | 单精度浮点数                                                                      |
| **`double`**   | 双精度浮点数                                                                      |
| **`fp16`**     | 半精度浮点数 (IEEE 754 Binary16)。*注：依赖硬件支持，无硬件支持时软模拟*          |
| **`bf16`**     | 脑浮点数 (Brain Floating Point, BFloat16)。*注：依赖硬件支持，无硬件支持时软模拟* |
| **`bool`**     | 布尔类型                                                                          |
| **`char`**     | Unicode字符 (32位)                                                                |
| **`true`**     | 布尔真值                                                                          |
| **`false`**    | 布尔假值                                                                          |
| **`null`**     | 空值                                                                              |
| **`sizeof`**   | 获取类型或变量大小                                                                |
| **`typeof`**   | **获取类型**。编译期获取表达式的类型。                                            |
| **`@`**        | **反射操作符**。获取类型或实体的元数据。                                          |
| **`operator`** | **运算符重载/转换运算符**。支持 `operator+`、`operator[]`、`operator T()` 等。    |
| **`implicit`** | **隐式转换**。标记构造函数或转换运算符允许隐式调用。                              |
| **`explicit`** | **显式转换**。标记构造函数或转换运算符必须显式调用（防止意外转换）。              |
| **`mutable`**  | **可变修饰符**。用于 lambda 捕获或不可变对象中的可变成员。                        |
| **`comptime`** | **编译期执行**。用于标记编译期常量、代码块或循环。                                |


## 5. 特殊符号关键字

| 符号     | 说明                                     |
| :------- | :--------------------------------------- |
| **`^`**  | 指针类型后缀 / 解引用(后缀)              |
| **`&`**  | 引用传递(前缀) / 引用类型后缀 / 引用捕获 |
| **`?`**  | 可空类型标记 / Result传播(后缀)          |
| **`!`**  | 只读引用标记 (用于参数)                  |
| **`~`**  | 移动语义标记 (后缀)                      |
| **`=>`** | 单表达式函数/属性简写                    |

---

## 重点关键字说明：`self`

在 C^ 中，我们使用 **`self`** 来指代当前对象实例，取代了 C++ 中的 `this`。

*   **语义**：`self` 代表对象本身（引用或值），而不是指针。
*   **显式声明**：在成员函数参数列表中，推荐显式写出 `self` 来标记函数的修饰符（虽然为了兼容性也支持隐式，但显式更符合 C^ 风格）。
*   **操作符重载**：在操作符重载中，使用 `self` 可以清晰地表达左操作数或右操作数。

```cpp
class Vector {
    int x;
    int y;

public:
    // 显式 self 声明
    func length(self!) -> float {
        return sqrt(self.x * self.x + self.y * self.y);
    }

    // 操作符重载：成员函数形式
    // self 指代左操作数
    func operator+(self!, Vector other) -> Vector {
        return Vector(self.x + other.x, self.y + other.y);
    }
}
```
